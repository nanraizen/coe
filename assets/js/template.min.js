// ACTIVE MENU
$('.navbar nav>ul>li>a,.navbar nav .dropdown ul li a').each(function () {
    var currentHref = $(this).prop('href');

    if (currentHref === window.location.href) {
        $(this).addClass('active');
        $(this).parents('li').addClass('active');
    }
});

// ACTIVE MENU - MRCD ADMIN
$('.admin-menu-micr a').each(function () {
    var currentHref = $(this).prop('href');

    if (currentHref === window.location.href) {
        $(this).removeClass('btn-transparent').addClass('btn-primary');
        $(this).find('.material-symbols').addClass('fill');
    }
});

// CATEGORY ICON PREVIEW
function replaceSpaces(input) {
    return input.replace(/\s/g, '_');
}

var timeout;

$('.catIcon').each(function () {
    var icon = $(this);
    var textInput = icon.find('.catIconText');
    var checkbox = icon.find('.catIconSolid input[type="checkbox"]');
    var iconElement = icon.find('.catIconIcon');

    textInput.on('input', function () {
        var inputText = $(this).val();
        var replacedText = replaceSpaces(inputText);
        $(this).val(replacedText);
        clearTimeout(timeout);
        timeout = setTimeout(function () {
            iconElement.text(replacedText);
        }, 500);
    });

    checkbox.on('change', function () {
        var isChecked = $(this).prop('checked');
        if (isChecked) {
            iconElement.addClass('fill');
        } else {
            iconElement.removeClass('fill');
        }
    });
});